<div class="container bg-white">
<!-- Infos principales de l'utilisateur -->
  <div class="text-center">
    <%= cl_image_tag current_user.photo.key, height: 175, class: "my-3", alt: "photo de profil", radius: "max" %>
    <h1><%= current_user.first_name %> <%= current_user.last_name %></h1>
    <span><%= current_user.age %> ans</span>
    <ul class="list-inline ">
      <li class="list-inline-item bg-white"><i class="fa-regular fa-envelope"></i> <%= current_user.email %></li>
      <li class="list-inline-item bg-white"><i class="fa-solid fa-mobile-retro"></i> <%= current_user.phone_number %></li>
    </ul>
  </div>
  <hr>
<!-- Détails de l'utilisateur -->
  <div class="text-start">
    <h4 class="">À propos</h4>
    <p class="border rounded-3 p-3"><%= current_user.description %></p>
    <h4 class="lead">Mes préférences</h4>
    <p class="border rounded-3 p-3"><%= current_user.preferences %></p>
    <div class="d-flex justify-content-between p-2">
    <%= link_to "Éditer mon profil", edit_profile_path, class: "btn btn-primary" %>
    <%= link_to "+ Sloop", new_sloop_path, class: "btn btn-primary" %>

    </div>
  </div>
<!-- Sloops de l'utilisateur / Si existants -->
  <% if current_user.sloops.any? %>
    <h3 class="mb-4"> <%=  current_user.sloops.size == 1 ? "Mon Sloop" : "Mes Sloops" %></h3>
    <div class="row">
    <% current_user.sloops.each do |sloop| %>
    <%= render "shared/sloopcard", sloop: sloop %>
      <% end %>
    </div>
  <% end %>
<!-- Les trajets proposés par l'utlisateur -->
  <% if current_user.rides.any? %>
  <h4 class="mb-4"> <%= current_user.rides.size == 1 ? "Mon trajet proposé" : "Mes trajets proposés" %></h4>
    <div class="row">
    <% current_user.rides.each do |ride| %>
    <%= render "shared/cardride", ride: ride %>
      <% end %>
    </div>
  <% end %>
<!-- Les demandes de trajet de l'utlisateur -->
    <h4 class="mb-4"> <%= pluralize(current_user.ride_requests.size, "Ma demande de Trajet", "Mes demandes de Trajets") %></h4>
    <% current_user.ride_requests.each do |riderequest| %>
      <%= render "shared/riderequestcard", riderequest: riderequest %>
     <% end %>
<!-- Commentaires sur l'utlisateur -->
  <div class="row">
    <div class="col-12 col-sm-6">
      <h3>Commentaires reçus</h3>
      <% if current_user.received_reviews.empty? %>
        <small><em class="text-muted">Vous n'avez pas encore reçu de commentaires.</em></small>
      <% end %>
      <% current_user.received_reviews.each do |review| %>
        <div>
          <% review.rating.times do %>
            <i class="fas fa-star text-info"></i>
          <% end %>
          <small><em class="text-muted">Il y a <%= distance_of_time_in_words_to_now(review.created_at) %></em></small>
          <p class="mb-0"><%= review.comment %></p>
        </div>
        <hr>
      <% end %>
    </div>
<%= link_to "Voir le profil public", user_path(current_user), class: "btn btn-primary" %>
<%= link_to "Se déconnecter", destroy_user_session_path, data: { turbo_method: :delete }, class: "btn btn-warning" %>
  </div>
</div>
